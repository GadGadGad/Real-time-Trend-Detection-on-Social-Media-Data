\documentclass[a4paper, oneside]{project}
\usepackage[utf8]{vietnam}
\usepackage{placeins}
\usepackage{csquotes}
\usepackage{amsfonts}
\usepackage{textcomp}
\usepackage{dblfloatfix}
\usepackage{subfig}
\usepackage{lineno}
\usepackage{amssymb}
\usepackage{tabularx,booktabs}
\usepackage{longtable, lipsum}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{graphicx}
\usepackage{lscape}
\usepackage{caption}
\usepackage{hyperref}
\usepackage[sorting=nyt]{biblatex}
\usepackage{mathtools}
\usepackage{lipsum}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{fancyvrb} % preamble
\usepackage{makecell}
\usepackage{blindtext}
\usepackage{subfiles} % Chèn các file nhỏ, giúp chia các chapter ra nhiều file hơn
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{tikz}
\usepackage{hyperref}

\renewcommand{\figureautorefname}{Hình}
\renewcommand{\tableautorefname}{Bảng}
\renewcommand{\sectionautorefname}{Mục}
\renewcommand{\subsectionautorefname}{Mục}

\usetikzlibrary{shapes.geometric, arrows.meta, positioning, fit, backgrounds}

% ======= SECTION NUMBERING (KHÔNG PHỤ THUỘC CHAPTER) =======
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}

% Code highlighting
\usepackage{listings}
\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single
}

\lstset{style=mystyle}

% Config reference
\addbibresource{ref.bib}

% Setup hype link in thesis
\hypersetup{urlcolor=blue,linkcolor=black,citecolor=black,colorlinks=true}
\DeclarePairedDelimiter\bra{\langle}{\rvert}
\DeclarePairedDelimiter\ket{\lvert}{\rangle}
\DeclarePairedDelimiterX\braket[2]{\langle}{\rangle}{#1 \delimsize\vert #2}

% Config information thesis
\upperuniname{ĐẠI HỌC QUỐC GIA THÀNH PHỐ HỒ CHÍ MINH}
\uniname{TRƯỜNG ĐẠI HỌC CÔNG NGHỆ THÔNG TIN}
\deptname{KHOA CÔNG NGHỆ PHẦN MỀM}
\stumajor{KỸ SƯ NGÀNH AN TOÀN THÔNG TIN}
\title{Hệ thống Phát hiện và Phân loại Sự kiện Thời gian Thực: Tích hợp Luồng Mạng Xã hội và Tin tức Chính thống với Trí tuệ LLM}
\titleen{Real-time Event Detection and Classification System: Integrating Social Media Streams and Official News with LLM}
\supervisor{GIẢNG VIÊN HƯỚNG DẪN}
\supervisorname{TIẾN SĨ ĐỖ TRỌNG HỢP \\ NGUYỄN NGỌC QUÍ}
\stunamewithid{TĂNG NHẤT - MSSV 22521027\\LÊ MINH NHỰT - MSSV 22521060}
\reporttime{NĂM 2026}

% Begin thesis
\begin{document}

\coverpage

% ======= FRONTMATTER =======
\frontmatter
\subfile{chapters/front/thanks}
\clearpage

\tableofcontents*
\addcontentsline{toc}{section}{Mục lục}
\clearpage

% --- FRONTMATTER: LOF/LOT KHÔNG ĐƯỢC DÍNH SECTION (tránh 0.x) ---
\counterwithout{figure}{section}
\counterwithout{table}{section}

\listoffigures*
\addcontentsline{toc}{section}{Danh sách hình vẽ}
\clearpage

\listoftables*
\addcontentsline{toc}{section}{Danh sách bảng}
\clearpage

\subfile{chapters/front/glossaries}

% ======= MAINMATTER =======
\setcounter{secnumdepth}{3}
\mainmatter

% --- MAINMATTER: bật lại đánh số theo section (1.1, 1.2, ...) ---
\counterwithin{equation}{section}
\counterwithin{table}{section}
\counterwithin{figure}{section}

\fancyhf{}
\fancyfoot[C]{\thepage}

\subfile{chapters/main/summary}

% Config page header
\if @twoside
    \fancyhead[EL,OR]{\bfseries\nouppercase\rightmark}
\else
    \fancyhead[R]{\bfseries\nouppercase\rightmark}
\fi

\subfile{chapters/main/01_introduction}
\subfile{chapters/main/02_related_work}
\subfile{chapters/main/03_preliminaries}
\subfile{chapters/main/04_architecture}
\subfile{chapters/main/05_methodology}
\subfile{chapters/main/06_experiments}
\subfile{chapters/main/07_results}
\subfile{chapters/main/08_discussion}
\subfile{chapters/main/09_conclusion}
% \subfile{chapters/main/10_ethics}

% ======= REFERENCES =======
\clearpage
\section*{Tài liệu tham khảo}
\addcontentsline{toc}{section}{Tài liệu tham khảo}
\markright{Tài liệu tham khảo}

\printbibliography[heading=none]

% ======= APPENDIX =======
\clearpage
\appendix

\setcounter{section}{0}
\renewcommand{\thesection}{\Alph{section}}
\renewcommand{\thesubsection}{\Alph{section}.\arabic{subsection}}

\setcounter{table}{0}
\setcounter{figure}{0}
\setcounter{equation}{0}

\counterwithin{table}{section}
\counterwithin{figure}{section}
\counterwithin{equation}{section}

\renewcommand{\thetable}{\Alph{section}.\arabic{table}}
\renewcommand{\thefigure}{\Alph{section}.\arabic{figure}}
\renewcommand{\theequation}{\Alph{section}.\arabic{equation}}

\subfile{chapters/main/11_appendix}
\clearpage
\subfile{chapters/main/12_appendix}


\end{document}
