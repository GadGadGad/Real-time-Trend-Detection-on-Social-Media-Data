\section{Phụ lục B: Định nghĩa và Công thức Các Metric}\label{app:metrics}

Trong báo cáo chính, chúng tôi chỉ tóm tắt các metric được sử dụng. Phụ lục này cung cấp định nghĩa và công thức chi tiết.

\subsection{Thông tin Tương hỗ Chuẩn hoá (NMI)}
Đo sự phù hợp giữa nhãn cụm $Y$ và ground truth $C$:
\begin{equation}
    NMI(Y, C) = \frac{2 \cdot I(Y; C)}{H(Y) + H(C)}
\end{equation}
Trong đó $I$ là thông tin tương hỗ và $H$ là entropy.

\subsection{Purity}
Lượng hoá sự chiếm ưu thế của lớp đa số trong mỗi cụm:
\begin{equation}
    Purity(\Omega, C) = \frac{1}{N} \sum_k \max_j |\omega_k \cap c_j|
\end{equation}
Trong đó $N$ là tổng số điểm dữ liệu, $\Omega = \{\omega_1, ..., \omega_k\}$ là tập các cụm, và $C = \{c_1, ..., c_j\}$ là tập các lớp ground truth.

\subsection{Entropy}
Đo tính đồng nhất của một cụm (thấp hơn tốt hơn):
\begin{equation}
    E(C) = - \sum_{k} \frac{n_k}{n} \log_2 \frac{n_k}{n}
\end{equation}
Trong đó $n_k$ là số điểm trong cụm $k$. Giá trị gần 0 hàm ý cụm chỉ chứa một lớp sự kiện duy nhất.

\subsection{BCubed-F1}
BCubed là metric theo từng phần tử, cân bằng tính đồng nhất và hoàn chỉnh của phân cụm. Nó là trung bình điều hoà của:
\begin{itemize}
    \item \textit{BCubed Precision ($P_{b^3}$):} Precision trung bình theo từng mục. Với mỗi mục $x$, nó tính tỷ lệ các mục trong cụm của $x$ $C(x)$ có cùng nhãn lớp $L(x)$:
    \begin{equation}
        P_{b^3} = \frac{1}{N} \sum_{x \in X} \frac{|C(x) \cap L(x)|}{|C(x)|}
    \end{equation}
    \item \textit{BCubed Recall ($R_{b^3}$):} Recall trung bình theo từng mục. Với mỗi mục $x$, nó tính tỷ lệ các mục trong lớp của $x$ $L(x)$ được nhóm vào cùng cụm $C(x)$:
    \begin{equation}
        R_{b^3} = \frac{1}{N} \sum_{x \in X} \frac{|C(x) \cap L(x)|}{|L(x)|}
    \end{equation}
\end{itemize}
\begin{equation}
    F1_{b^3} = 2 \cdot \frac{P_{b^3} \cdot R_{b^3}}{P_{b^3} + R_{b^3}}
\end{equation}
Khác với Purity, BCubed phạt cả gộp quá mức (Precision thấp) và phân mảnh quá mức (Recall thấp).

\subsection{Silhouette Score}
Lượng hoá mức độ một đối tượng phù hợp với cụm của nó so với cụm lân cận gần nhất:
\begin{equation}
    S(i) = \frac{b(i) - a(i)}{\max\{a(i), b(i)\}}
\end{equation}
Trong đó $a(i)$ là khoảng cách trung bình trong cụm và $b(i)$ là khoảng cách trung bình đến cụm gần nhất. $S \in [-1, 1]$, giá trị gần 1 chỉ ra các cụm dày đặc và phân tách tốt.
